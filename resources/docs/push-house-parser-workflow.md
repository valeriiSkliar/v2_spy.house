# Push.House Parser Workflow

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π workflow –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ API Push.House, –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

## –û–±–∑–æ—Ä

–û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ ‚Äî —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –ø–æ–ª—É—á–∞—Ç—å –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π, —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –µ–≥–æ —Å —Ç–µ–∫—É—â–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –≤ –Ω–∞—à–µ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –Ω–æ–≤—ã–µ –∏ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è, –æ–±–Ω–æ–≤–ª—è—Ç—å –ë–î –∏ —Å—Ç–∞–≤–∏—Ç—å –≤ –æ—á–µ—Ä–µ–¥—å –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è (Jobs) –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏.

## –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö API

API Push.House –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ —Å–æ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:

```json
[
  {
    "id": 1393905,
    "title": "üò± PARAB√âNS! VOC√ä GANHOU! üíµ",
    "text": "‚úÖ B√îNUS R$4,675 + 100 GIRADAS GR√ÅTIS ü§ë",
    "icon": "https://s3.push.house/push.house-camps/20066/68667c5018fa6.png",
    "img": "https://s3.push.house/push.house-camps/20066/68667c50306a2.png",
    "url": "https://oxwheele.life/?creative_id={camp}&source={site}",
    "cpc": "0.00770000",
    "country": "BR",
    "platform": "Mob",
    "isAdult": false,
    "isActive": false,
    "created_at": "2025-07-03"
  },
  {
    "id": 1393904,
    "title": "",
    "text": "",
    "icon": "https://s3.push.house/push.house-camps/82883/",
    "img": "https://s3.push.house/push.house-camps/82883/",
    "url": "https://100app.pro/click.php?key=xx0bhpzqo8pzb9xunjhy&click_id={click_id}&price={price}&site={site}&camp={camp}&feed={feed}&country={country}&city={city}&os={os}&browser={browser}&format={format}&lang={lang}&pdpid={pdpid}",
    "cpc": "0.00038000",
    "country": "JP",
    "platform": "Mob",
    "isAdult": true,
    "isActive": false,
    "created_at": "2025-07-03"
  },
  {
    "id": 1393903,
    "title": "Stop working with 1 hand!",
    "text": "Finally start meeting hotties in {CITY}",
    "icon": "https://s3.push.house/push.house-camps/61934/68667a3f6df58.png",
    "img": "https://s3.push.house/push.house-camps/61934/68667a3f5cdfe.png",
    "url": "https://rku2mrp.hot-partner-theclick.com/ygzgxx3?s1={campaign_id}&cid={click_id}&site={site}&city={city}&browser={browser}&os={os}&feed={feed}",
    "cpc": "0.05100000",
    "country": "NZ",
    "platform": "Mob",
    "isAdult": true,
    "isActive": false,
    "created_at": "2025-07-03"
  }
]
```

**–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è:**

- `id` - –≤–Ω–µ—à–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –æ–±—ä—è–≤–ª–µ–Ω–∏—è (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ `external_id` –≤ –Ω–∞—à–µ–π –ë–î)
- `title`, `text` - –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Ç–µ–∫—Å—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- `icon`, `img` - URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- `url` - —Ü–µ–ª–µ–≤–∞—è —Å—Å—ã–ª–∫–∞ —Å –º–∞–∫—Ä–æ—Å–∞–º–∏
- `cpc` - —Å—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞ –∫–ª–∏–∫
- `country` - –∫–æ–¥ —Å—Ç—Ä–∞–Ω—ã (ISO)
- `platform` - –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ (Mob/Desktop)
- `isAdult` - —Ñ–ª–∞–≥ –≤–∑—Ä–æ—Å–ª–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- `isActive` - —Å—Ç–∞—Ç—É—Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- `created_at` - –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è

## DTO –∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã —Å DTO

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö (push_house, facebook,tiktok, feed_house ) AdSource::class
**–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û** —Å–æ–∑–¥–∞–µ—Ç—Å—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π DTO (Data Transfer Object), –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:

1. **–¢–∏–ø–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** - –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å—Ç—Ä–æ–≥—É—é —Ç–∏–ø–∏–∑–∞—Ü–∏—é –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö –æ—Ç API
2. **–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è** - –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –≤ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ –ë–î
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è** - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∏ –ø–æ–ª–Ω–æ—Ç—É –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
4. **–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è** - –ø—Ä–∏–≤–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∫ –µ–¥–∏–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É

### –ü—Ä–∏–º–µ—Ä DTO –¥–ª—è Push.House

```php
<?php

namespace App\Http\DTOs\Parsers;

use App\Enums\Frontend\AdvertisingFormat;
use App\Enums\Frontend\AdvertisingStatus;
use App\Enums\Frontend\Platform;
use App\Services\Parsers\CreativePlatformNormalizer;
use App\Services\Parsers\CountryCodeNormalizer;
use App\Services\Parsers\SourceNormalizer;
use Carbon\Carbon;

class PushHouseCreativeDTO
{
    public function __construct(
        public readonly int $externalId,
        public readonly string $title,
        public readonly string $text,
        public readonly string $iconUrl,
        public readonly string $imageUrl,
        public readonly string $targetUrl,
        public readonly float $cpc,
        public readonly string $countryCode,
        public readonly Platform $platform,
        public readonly bool $isAdult,
        public readonly bool $isActive,
        public readonly Carbon $createdAt,
        public readonly string $source = 'push_house'
    ) {}

    /**
     * –°–æ–∑–¥–∞–µ—Ç DTO –∏–∑ —Å—ã—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö API Push.House
     */
    public static function fromApiResponse(array $data): self
    {
        return new self(
            externalId: $data['id'],
            title: $data['title'] ?? '',
            text: $data['text'] ?? '',
            iconUrl: $data['icon'] ?? '',
            imageUrl: $data['img'] ?? '',
            targetUrl: $data['url'] ?? '',
            cpc: (float) ($data['cpc'] ?? 0),
            countryCode: strtoupper($data['country'] ?? ''),
            platform: CreativePlatformNormalizer::normalizePlatform(
                $data['platform'] ?? 'Mob',
                'push_house'
            ),
            isAdult: (bool) ($data['isAdult'] ?? false),
            isActive: (bool) ($data['isActive'] ?? false),
            createdAt: Carbon::parse($data['created_at'] ?? now())
        );
    }

    /**
     * –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç DTO –≤ –º–∞—Å—Å–∏–≤ –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ –ë–î
     */
    public function toDatabase(): array
    {
        return [
            // –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è
            'external_id' => $this->externalId,
            'title' => $this->title,
            'description' => $this->text,
            'icon_url' => $this->iconUrl,
            'main_image_url' => $this->imageUrl,
            'landing_url' => $this->targetUrl,
            'platform' => $this->platform->value,
            'is_adult' => $this->isAdult,
            'external_created_at' => $this->createdAt,

            // –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ foreign key –ø–æ–ª—è
            'source_id' => SourceNormalizer::normalizeSourceName($this->source),
            'country_id' => CountryCodeNormalizer::normalizeCountryCode($this->countryCode),

            // –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ boolean –≤ enum –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞
            'status' => $this->isActive ? AdvertisingStatus::Active : AdvertisingStatus::Inactive,

            // –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –ë–î —Å –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            'format' => AdvertisingFormat::PUSH, // Push.House –≤—Å–µ–≥–¥–∞ push —Ñ–æ—Ä–º–∞—Ç
            'combined_hash' => $this->generateCombinedHash(),

            // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏
            'created_at' => now(),
            'updated_at' => now(),
        ];
    }

    /**
     * –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ö–µ—à –¥–ª—è –∫—Ä–µ–∞—Ç–∏–≤–∞
     */
    private function generateCombinedHash(): string
    {
        $data = [
            'external_id' => $this->externalId,
            'source' => $this->source,
            'title' => $this->title,
            'text' => $this->text,
            'country' => $this->countryCode,
        ];

        return hash('sha256', json_encode($data, JSON_UNESCAPED_UNICODE));
    }

    /**
     * –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö DTO
     */
    public function isValid(): bool
    {
        return !empty($this->externalId)
            && !empty($this->countryCode);
    }
}
```

### –ü—Ä–æ—Ü–µ—Å—Å —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏

1. **–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** - API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ —Å—ã—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
2. **–°–æ–∑–¥–∞–Ω–∏–µ DTO** - –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ `PushHouseCreativeDTO::fromApiResponse()`
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ `$dto->isValid()`
4. **–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è** - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ —Ñ–æ—Ä–º–∞—Ç –ë–î —á–µ—Ä–µ–∑ `$dto->toDatabase()`
5. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** - –º–∞—Å—Å–æ–≤–∞—è –≤—Å—Ç–∞–≤–∫–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```php
// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Å–µ—Ä–≤–∏—Å–µ
$apiResponse = $this->fetchFromPushHouseApi();
$dtoCollection = collect($apiResponse)
    ->map(fn($item) => PushHouseCreativeDTO::fromApiResponse($item))
    ->filter(fn($dto) => $dto->isValid());

$dataForDatabase = $dtoCollection
    ->map(fn($dto) => $dto->toDatabase())
    ->all();

DB::table('creatives')->insert($dataForDatabase);
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ–¥—Ö–æ–¥–∞

- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ç–∏–ø–æ–≤** - –∏—Å–∫–ª—é—á–∞–µ—Ç –æ—à–∏–±–∫–∏ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏
- **–ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ** - –≤—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –ø—Ä–∏–≤–æ–¥—è—Ç—Å—è –∫ –µ–¥–∏–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É
- **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** - DTO –ª–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ
- **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ
- **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å** - —è–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞

## –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏

–î–ª—è —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∑–Ω–∞—á–µ–Ω–∏–π –ø–ª–∞—Ç—Ñ–æ—Ä–º –æ—Ç —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∞—Ç—Ç–µ—Ä–Ω Strategy —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–≤:

```php
// –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—Å–µ—Ö –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–≤
interface PlatformNormalizerInterface
{
    public function normalize(string $platformValue): Platform;
    public function canHandle(string $source): bool;
}

// –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä
class CreativePlatformNormalizer
{
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–±–∏—Ä–∞–µ—Ç –Ω—É–∂–Ω—ã–π –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ç–æ—Ä –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫—É
    public static function normalizePlatform(string $platformValue, string $source): Platform;
}
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–æ–≤–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Facebook Ads):

1. **–°–æ–∑–¥–∞—Ç—å –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ç–æ—Ä**:

```php
class FacebookAdsPlatformNormalizer implements PlatformNormalizerInterface
{
    private const PLATFORM_MAPPING = [
        'mobile_app' => Platform::MOBILE,
        'mobile_web' => Platform::MOBILE,
        'desktop' => Platform::DESKTOP,
        'tablet' => Platform::DESKTOP, // –†–µ—à–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
    ];

    public function normalize(string $platformValue): Platform
    {
        $normalized = strtolower(trim($platformValue));
        return self::PLATFORM_MAPPING[$normalized] ?? Platform::MOBILE;
    }

    public function canHandle(string $source): bool
    {
        return strtolower($source) === 'facebook_ads';
    }
}
```

2. **–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∫–ª–∞—Å—Å–µ**:

```php
// –í CreativePlatformNormalizer::registerDefaultNormalizers()
$this->registerNormalizer(new FacebookAdsPlatformNormalizer());
```

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ DTO**:

```php
platform: CreativePlatformNormalizer::normalizePlatform(
    $data['device_platform'] ?? 'mobile_app',
    'facebook_ads'
),
```

### –ü—Ä–∏–Ω—Ü–∏–ø—ã –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏

- **Fallback –∑–Ω–∞—á–µ–Ω–∏–µ**: –í—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `Platform::MOBILE` –ø—Ä–∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–º –∑–Ω–∞—á–µ–Ω–∏–∏
- **Case-insensitive**: –ü—Ä–∏–≤–æ–¥–∏—Ç—å –≤—Ö–æ–¥–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∫ –Ω–∏–∂–Ω–µ–º—É —Ä–µ–≥–∏—Å—Ç—Ä—É
- **Trim whitespace**: –£–¥–∞–ª—è—Ç—å –ø—Ä–æ–±–µ–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
- **–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞**: –ü–ª–∞–Ω—à–µ—Ç—ã –æ–±—ã—á–Ω–æ –º–∞–ø—è—Ç—Å—è –Ω–∞ `DESKTOP` –¥–ª—è —Ä–µ–∫–ª–∞–º–Ω—ã—Ö —Ü–µ–ª–µ–π

## Workflow Steps

### 1. –ò–Ω–∏—Ü–∏–∞—Ü–∏—è (–¢—Ä–∏–≥–≥–µ—Ä)

- **Artisan-–∫–æ–º–∞–Ω–¥–∞**: –°–æ–∑–¥–∞–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞ `php artisan parsers:run-push-house` –∫–∞–∫ –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø–∞—Ä—Å–µ—Ä–∞.
- **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ (Scheduler)**: –ö–æ–º–∞–Ω–¥–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –≤ `bootstrap/app.phps` –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞.
  ```php
  // bootstrap/app.php
  $schedule->command('parsers:run-push-house')
           ->everyFifteenMinutes()
           ->withoutOverlapping(); // –í–∞–∂–Ω–æ: –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∑–∞–ø—É—Å–∫ –Ω–æ–≤–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞, –µ—Å–ª–∏ —Å—Ç–∞—Ä—ã–π –µ—â–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.
  ```

### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö

- **–ó–∞–ø—Ä–æ—Å –∫ API**: –°–µ—Ä–≤–∏—Å `PushHouseParser` –≤—ã–ø–æ–ª–Ω—è–µ—Ç HTTP-–∑–∞–ø—Ä–æ—Å –∫ API Push.House –∏ –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π.
- **–°–æ–∑–¥–∞–Ω–∏–µ DTO**: –û—Ç–≤–µ—Ç (JSON) –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é `PushHouseCreativeDTO` –æ–±—ä–µ–∫—Ç–æ–≤ —á–µ—Ä–µ–∑ `fromApiResponse()` –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏–∏.
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ö–∞–∂–¥—ã–π DTO –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `isValid()` –º–µ—Ç–æ–¥, –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤—ã–≤–∞—é—Ç—Å—è.
- **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ ID**: –ò–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤–∞–ª–∏–¥–Ω—ã—Ö DTO –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –≤—Å–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –≤–Ω–µ—à–Ω–∏–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã (`external_id`) –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –º–∞—Å—Å–∏–≤ `$apiAdIds`.

### 3. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∏ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π

–≠—Ç–æ –∫–ª—é—á–µ–≤–æ–π —à–∞–≥ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö.

- **–ü–æ–ª—É—á–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö ID –∏–∑ –ë–î**: –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö `external_id` –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.
  ```sql
  SELECT external_id FROM ads WHERE source = 'push_house';
  ```
  –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –º–∞—Å—Å–∏–≤ `$dbAdIds`.
- **–ü–æ–∏—Å–∫ –Ω–æ–≤—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π**: –ù–∞—Ö–æ–¥—è—Ç—Å—è ID, –∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç—å –≤ `$apiAdIds`, –Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ `$dbAdIds`.
  ```php
  $newAdIds = array_diff($apiAdIds, $dbAdIds);
  ```
- **–ü–æ–∏—Å–∫ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π**: –ù–∞—Ö–æ–¥—è—Ç—Å—è ID, –∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç—å –≤ `$dbAdIds`, –Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ `$apiAdIds`.
  ```php
  $deactivatedAdIds = array_diff($dbAdIds, $apiAdIds);
  ```

### 4. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞–ø–∏—Å–∏ –≤ –ë–î –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–±–µ—Ä–Ω—É—Ç—ã –≤ **—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é** –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö.

```php
DB::transaction(function () use ($newAdIds, $deactivatedAdIds, $dtoCollection) {
    // 1. –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π
    $newCreativesData = $dtoCollection
        ->filter(fn($dto) => in_array($dto->externalId, $newAdIds))
        ->map(fn($dto) => $dto->toDatabase())
        ->all();

    if (!empty($newCreativesData)) {
        DB::table('creatives')->insert($newCreativesData);
    }

    // 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π
    if (!empty($deactivatedAdIds)) {
        DB::table('creatives')
            ->whereIn('external_id', $deactivatedAdIds)
            ->where('source', 'push_house')
            ->update(['is_active' => false, 'updated_at' => now()]);
    }
});
```

### 5. –ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π (Jobs) –≤ –æ—á–µ—Ä–µ–¥—å

–≠—Ç–æ—Ç —à–∞–≥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **–ø–æ—Å–ª–µ** —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.

- **–î–ª—è –Ω–æ–≤—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π**:

  1.  –ü–æ–ª—É—á–∞–µ–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ ID —Ç–æ–ª—å–∫–æ —á—Ç–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π.
      ```php
      $localIdsForNewAds = DB::table('creatives')->whereIn('external_id', $newAdIds)->pluck('id');
      ```
  2.  **–î–∏—Å–ø–µ—Ç—á–µ—Ä–∏–∑–∞—Ü–∏—è –∑–∞–¥–∞–Ω–∏–π**: –°–æ–∑–¥–∞–µ–º –æ–¥–Ω–æ "–ø–∞–∫–µ—Ç–Ω–æ–µ" –∑–∞–¥–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –º–∞—Å—Å–∏–≤ ID, —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞—Ç—å –æ—á–µ—Ä–µ–¥—å.
      ```php
      if ($localIdsForNewAds->isNotEmpty()) {
          ProcessNewAdsBatch::dispatch($localIdsForNewAds->all());
      }
      ```

- **–î–ª—è –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π**:
  1.  –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –ø–æ–ª—É—á–∞–µ–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ ID –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π.
      ```php
      $localIdsForDeactivatedAds = DB::table('creatives')->whereIn('external_id', $deactivatedAdIds)->pluck('id');
      ```
  2.  **–î–∏—Å–ø–µ—Ç—á–µ—Ä–∏–∑–∞—Ü–∏—è –∑–∞–¥–∞–Ω–∏–π**: –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç–¥–µ–ª—å–Ω–æ–µ –ø–∞–∫–µ—Ç–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–∏.
      ```php
      if ($localIdsForDeactivatedAds->isNotEmpty()) {
          ProcessDeactivatedAdsBatch::dispatch($localIdsForDeactivatedAds->all());
      }
      ```

## –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ö–µ–º–∞

1.  **Cron** -> **Artisan Command**.
2.  **Fetch** —Å API -> **DTO Collection** -> –≤–∞–ª–∏–¥–∞—Ü–∏—è -> `$apiAdIds`.
3.  **Compare**:
    - `$newAdIds = $apiAdIds - $dbAdIds`.
    - `$deactivatedAdIds = $dbAdIds - $apiAdIds`.
4.  **DB Transaction**:
    - **Transform**: DTO -> database format —á–µ—Ä–µ–∑ `toDatabase()`.
    - **INSERT** –Ω–æ–≤—ã–µ, **UPDATE** –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ.
5.  **Dispatch Jobs**:
    - `SELECT` –ª–æ–∫–∞–ª—å–Ω—ã–µ ID –¥–ª—è –Ω–æ–≤—ã—Ö -> `ProcessNewAdsBatch::dispatch([...])`.
    - `SELECT` –ª–æ–∫–∞–ª—å–Ω—ã–µ ID –¥–ª—è –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö -> `ProcessDeactivatedAdsBatch::dispatch([...])`.

## –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

- **–¢–∏–ø–∏–∑–∞—Ü–∏—è**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö DTO –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö.
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î (1 `SELECT`, 1 `INSERT`, 1 `UPDATE`).
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –¥–ª—è –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–π –∏ `withoutOverlapping()` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è "–≥–æ–Ω–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π".
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π (`Batch Jobs`) –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –±–µ–∑ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ —Å–∏—Å—Ç–µ–º—ã –æ—á–µ—Ä–µ–¥–µ–π.
- **–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è**: –ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —á–µ—Ä–µ–∑ DTO —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—é.

## –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

–ù–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞, –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∞—è —Ñ–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Push.House –ø–∞—Ä—Å–µ—Ä–∞:

### 1. Console Commands (–¢–æ—á–∫–∏ –≤—Ö–æ–¥–∞)

```
app/Console/Commands/Parsers/
‚îî‚îÄ‚îÄ RunPushHouseParserCommand.php          # –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞—è –∫–æ–º–∞–Ω–¥–∞
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**

- `RunPushHouseParserCommand.php` - –æ—Å–Ω–æ–≤–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ `php artisan parsers:run-push-house`
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–ø—Ü–∏–π `--queue`, `--force`, `--dry-run`, `--test`
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–º Laravel (Scheduler)

**–ü–æ—á–µ–º—É —É–±—Ä–∞–ª–∏ –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:**

- ‚ùå `TestPushHouseConnectionCommand` - —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —á–µ—Ä–µ–∑ `--test` —Ñ–ª–∞–≥ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã
- ‚ùå `ForceSyncPushHouseCommand` - —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —á–µ—Ä–µ–∑ `--force` —Ñ–ª–∞–≥ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã
- ‚ùå `PushHouseStatsCommand` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —á–µ—Ä–µ–∑ –ª–æ–≥–∏, –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è MVP

### 2. DTOs (–¢–∏–ø–∏–∑–∞—Ü–∏—è –∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö)

```
app/Http/DTOs/Parsers/
‚îî‚îÄ‚îÄ PushHouseCreativeDTO.php               # –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π DTO
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**

- –¢–∏–ø–∏–∑–∞—Ü–∏—è –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö –æ—Ç Push.House API
- –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç –ë–î —á–µ—Ä–µ–∑ `fromApiResponse()` –∏ `toDatabase()`
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ `isValid()`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ç–æ—Ä—ã

**–ü–æ—á–µ–º—É —É–±—Ä–∞–ª–∏ –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ DTOs:**

- ‚ùå `PushHouseParsingResultDTO` - –ø—Ä–æ—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω
- ‚ùå `PushHouseApiResponseDTO` - –ø—Ä—è–º–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ JSON –æ—Ç–≤–µ—Ç–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ
- ‚ùå `BaseParserDTO` - over-engineering –¥–ª—è –æ–¥–Ω–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞
- ‚ùå `ParserResultInterface` - YAGNI –ø—Ä–∏–Ω—Ü–∏–ø, –ø–æ–∫–∞ –Ω–µ –Ω—É–∂–µ–Ω

### 3. Services (–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞)

```
app/Services/Parsers/PushHouse/
‚îú‚îÄ‚îÄ PushHouseParsingService.php            # –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å –ø–∞—Ä—Å–∏–Ω–≥–∞
‚îú‚îÄ‚îÄ PushHouseApiClient.php                 # HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è API
‚îî‚îÄ‚îÄ PushHouseSynchronizer.php              # –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –ë–î
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**

- `PushHouseParsingService.php` - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –≤—Å–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ (–≥–ª–∞–≤–Ω—ã–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä)
- `PushHouseApiClient.php` - —Ä–∞–±–æ—Ç–∞ —Å HTTP API, –ø–∞–≥–∏–Ω–∞—Ü–∏—è, retry –ª–æ–≥–∏–∫–∞, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API
- `PushHouseSynchronizer.php` - **–ö–õ–Æ–ß–ï–í–û–ô –ö–û–ú–ü–û–ù–ï–ù–¢** –¥–ª—è —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:
  - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–≤ ID (`array_diff($apiAdIds, $dbAdIds)`)
  - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∏ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π
  - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è DB —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
  - –ü–∞–∫–µ—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ INSERT/UPDATE
  - –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö ID –¥–ª—è Jobs

**–ü–æ—á–µ–º—É —É–±—Ä–∞–ª–∏ –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

- ‚ùå `PushHouseDataTransformer` - —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–æ–∫—Ä—ã—Ç DTO –º–µ—Ç–æ–¥–∞–º–∏ (`fromApiResponse()`, `toDatabase()`)
- ‚ùå `PushHouseDataValidator` - –≤–∞–ª–∏–¥–∞—Ü–∏—è —É–∂–µ –≤ `PushHouseCreativeDTO::isValid()`
- ‚ùå `PushHouseBusinessRules` - –ø—Ä–æ—Å—Ç—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ DTO, —Å–ª–æ–∂–Ω—ã—Ö –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª –Ω–µ—Ç

### 4. Jobs (–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞)

```
app/Jobs/Parsers/PushHouse/
‚îî‚îÄ‚îÄ ProcessPushHouseParsingJob.php         # –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –∑–∞–¥–∞–Ω–∏–µ
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**

- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞
- –í–∫–ª—é—á–∞–µ—Ç –ª–æ–≥–∏–∫—É –¥–ª—è –Ω–æ–≤—ã—Ö –∏ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- –ü–∞–∫–µ—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ Job
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –æ—á–µ—Ä–µ–¥–µ–π (RabbitMQ)

**–ü–æ—á–µ–º—É —É–±—Ä–∞–ª–∏ –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ Jobs:**

- ‚ùå `ProcessNewPushHouseAdsJob` - –ª–æ–≥–∏–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π Job
- ‚ùå `ProcessDeactivatedPushHouseAdsJob` - –ª–æ–≥–∏–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π Job
- ‚ùå `BatchProcessPushHouseAdsJob` - –¥—É–±–ª–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –æ—Å–Ω–æ–≤–Ω–æ–≥–æ Job
- ‚ùå `SendPushHouseParsingReportJob` - –æ—Ç—á–µ—Ç—ã —á–µ—Ä–µ–∑ –ª–æ–≥–∏ –∏ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å–∏—Å—Ç–µ–º—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚ùå `NotifyPushHouseErrorsJob` - –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å–∏—Å—Ç–µ–º—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### 5. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ç–æ—Ä—ã (–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º—ã)

```
app/Services/Parsers/PlatformNormalizers/
‚îî‚îÄ‚îÄ PushHousePlatformNormalizer.php        # ‚úÖ –£–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

app/Services/Parsers/
‚îú‚îÄ‚îÄ SourceNormalizer.php                   # ‚úÖ –£–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
‚îî‚îÄ‚îÄ CountryCodeNormalizer.php              # ‚úÖ –£–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–≤ - **–ë–ï–ó –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–• –ö–õ–ê–°–°–û–í**
- `PushHousePlatformNormalizer` —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- `SourceNormalizer` –∏ `CountryCodeNormalizer` –ø–æ–∫—Ä—ã–≤–∞—é—Ç –≤—Å–µ –Ω—É–∂–¥—ã

**–ü–æ—á–µ–º—É —É–±—Ä–∞–ª–∏ –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ç–æ—Ä—ã:**

- ‚ùå `PushHouseFieldNormalizer` - —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –ø–æ–ª–µ–π —Ç—Ä–µ–±—É—é—â–∏—Ö –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–µ—Ç
- ‚ùå `PushHouseStatusNormalizer` - –ø—Ä–æ—Å—Ç–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ `boolean -> enum` –≤ DTO

### 6. Exceptions (–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º—ã)

```
app/Services/Parsers/Exceptions/
‚îî‚îÄ‚îÄ ParserException.php                    # ‚úÖ –£–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**

- –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `ParserException` —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ø–æ–ª–µ `context`
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ recovery –∏ retry –ª–æ–≥–∏–∫–∏ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞

**–ü–æ—á–µ–º—É —É–±—Ä–∞–ª–∏ –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è:**

- ‚ùå `PushHouseApiException` - –∏—Å–ø–æ–ª—å–∑—É–µ–º `ParserException` —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º `['type' => 'api_error']`
- ‚ùå `PushHouseValidationException` - –∏—Å–ø–æ–ª—å–∑—É–µ–º `ParserException` —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º `['type' => 'validation_error']`
- ‚ùå `PushHouseSyncException` - –∏—Å–ø–æ–ª—å–∑—É–µ–º `ParserException` —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º `['type' => 'sync_error']`
- ‚ùå `PushHouseParsingException` - –∏—Å–ø–æ–ª—å–∑—É–µ–º –±–∞–∑–æ–≤—ã–π `ParserException`

### 7. Configuration (–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–Ω—Ñ–∏–≥–æ–≤)

```
config/
‚îî‚îÄ‚îÄ services.php                           # ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é push_house
```

**–ü—Ä–∏–º–µ—Ä –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ config/services.php:**

```php
// –í —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π config/services.php –¥–æ–±–∞–≤–∏—Ç—å:
'push_house' => [
    'base_url' => env('PUSH_HOUSE_API_URL', 'https://api.push.house/v1'),
    'timeout' => env('PUSH_HOUSE_TIMEOUT', 45),
    'rate_limit' => env('PUSH_HOUSE_RATE_LIMIT', 1000),
    'max_retries' => env('PUSH_HOUSE_MAX_RETRIES', 3),
    'retry_delay' => env('PUSH_HOUSE_RETRY_DELAY', 2),
    'batch_size' => env('PUSH_HOUSE_BATCH_SIZE', 100),
    'max_pages' => env('PUSH_HOUSE_MAX_PAGES', 100),
    'source_name' => 'push_house',
],
```

**–ü–æ—á–µ–º—É —É–±—Ä–∞–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏:**

- ‚ùå `config/parsers/push_house.php` - –∏–∑–±—ã—Ç–æ—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –æ–¥–Ω–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞
- ‚ùå `config/parsers/parsers.php` - –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–Ω—Ñ–∏–≥–∏ (`services.php`, `queue.php`, `logging.php`)

### 8. Tests (–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

```
tests/Feature/Parsers/PushHouse/
‚îú‚îÄ‚îÄ PushHouseParsingServiceTest.php        # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ PushHouseApiClientTest.php             # –¢–µ—Å—Ç—ã API –∫–ª–∏–µ–Ω—Ç–∞
‚îú‚îÄ‚îÄ PushHouseSynchronizerTest.php          # –¢–µ—Å—Ç—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ RunPushHouseParserCommandTest.php      # –¢–µ—Å—Ç—ã –∫–æ–º–∞–Ω–¥—ã

tests/Unit/Parsers/PushHouse/
‚îú‚îÄ‚îÄ PushHouseCreativeDTOTest.php           # –¢–µ—Å—Ç—ã DTO
‚îú‚îÄ‚îÄ PushHouseSynchronizerTest.php          # Unit —Ç–µ—Å—Ç—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ ProcessPushHouseParsingJobTest.php     # –¢–µ—Å—Ç—ã Job
```

**–ü–æ—á–µ–º—É —É–±—Ä–∞–ª–∏ –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã:**

- ‚ùå `PushHouseParsingResultDTOTest.php` - DTO –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- ‚ùå `BatchProcessPushHouseAdsJobTest.php` - Job –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- ‚úÖ –£–ø—Ä–æ—Å—Ç–∏–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π - —É–±—Ä–∞–ª–∏ –ª–∏—à–Ω–∏–µ –≤–ª–æ–∂–µ–Ω–∏—è

### 9. Database (–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã)

```
database/migrations/
‚îî‚îÄ‚îÄ [timestamp]_add_push_house_support_to_creatives_table.php  # ‚úÖ –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–Ω—ã –Ω–æ–≤—ã–µ –ø–æ–ª—è

database/seeders/
‚îî‚îÄ‚îÄ PushHouseTestDataSeeder.php            # ‚úÖ –¢–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**

- –¢–∞–±–ª–∏—Ü–∞ `creatives` —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è
- –ú–∏–≥—Ä–∞—Ü–∏—è –Ω—É–∂–Ω–∞ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É—é—Ç—Å—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è Push.House –ø–æ–ª—è
- Seeder –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### 10. Scheduler Integration (–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫)

**–í bootstrap/app.php:**

```php
$schedule->command('parsers:run-push-house')
         ->everyFifteenMinutes()
         ->withoutOverlapping()
         ->runInBackground()
         ->onFailure(function () {
             // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
         });
```

### 11. Monitoring –∏ Logging (–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º—ã)

```
storage/logs/
‚îú‚îÄ‚îÄ laravel.log                            # ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ª–æ–≥
‚îî‚îÄ‚îÄ parsers.log                            # ‚úÖ –ï—Å–ª–∏ –µ—Å—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–∞–Ω–∞–ª –¥–ª—è –ø–∞—Ä—Å–µ—Ä–æ–≤
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**

- –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å–∏—Å—Ç–µ–º—É –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è Laravel
- –ö–æ–Ω—Ç–µ–∫—Å—Ç Push.House –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–æ–ª—è –≤ –ª–æ–≥–∞—Ö
- –ò–∑–±–µ–≥–∞–µ–º —Å–æ–∑–¥–∞–Ω–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –ª–æ–≥–æ–≤

### –ü—Ä–∏–Ω—Ü–∏–ø—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

1. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–º–µ–µ—Ç —á–µ—Ç–∫—É—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
2. **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö
3. **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ö–∞–∂–¥—ã–π —Å–ª–æ–π –ø–æ–∫—Ä—ã—Ç —Ç–µ—Å—Ç–∞–º–∏
4. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–æ—Å—Ç—å**: –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—ã–Ω–æ—Å—è—Ç—Å—è –≤ –∫–æ–Ω—Ñ–∏–≥
5. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–µ—Ç—Ä–∏–∫–∏
6. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ë–î
7. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ recovery –º–µ—Ö–∞–Ω–∏–∑–º—ã

### –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–§–∞–∑–∞ 1**: DTOs –∏ –±–∞–∑–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã
2. **–§–∞–∑–∞ 2**: API –∫–ª–∏–µ–Ω—Ç
3. **–§–∞–∑–∞ 3**: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –ë–î (Synchronizer)
4. **–§–∞–∑–∞ 4**: Jobs –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
5. **–§–∞–∑–∞ 5**: Commands –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–º
6. **–§–∞–∑–∞ 6**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
7. **–§–∞–∑–∞ 7**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã

### –ò—Ç–æ–≥–æ–≤–æ–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

## ‚úÖ –û—Å—Ç–∞–≤–∏–ª–∏ —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã (5 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤):

1. **RunPushHouseParserCommand.php** - –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ —Å —Ñ–ª–∞–≥–∞–º–∏ `--test`, `--force`, `--dry-run`
2. **PushHouseCreativeDTO.php** - —Ç–∏–ø–∏–∑–∞—Ü–∏—è –∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (`fromApiResponse()`, `toDatabase()`, `isValid()`)
3. **PushHouseParsingService.php** - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –≤—Å–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞
4. **PushHouseApiClient.php** - —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å API (HTTP –∑–∞–ø—Ä–æ—Å—ã, retry –ª–æ–≥–∏–∫–∞, –ø–∞–≥–∏–Ω–∞—Ü–∏—è)
5. **PushHouseSynchronizer.php** - —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ë–î (`array_diff`, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, batch –æ–ø–µ—Ä–∞—Ü–∏–∏)
6. **ProcessPushHouseParsingJob.php** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (–≤–∫–ª—é—á–∞–µ—Ç –ª–æ–≥–∏–∫—É –¥–ª—è –Ω–æ–≤—ã—Ö –∏ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π)

### –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–∏—Å—Ç–µ–º—ã:

- **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ç–æ—Ä—ã** - `PushHousePlatformNormalizer`, `SourceNormalizer`, `CountryCodeNormalizer`
- **–ò—Å–∫–ª—é—á–µ–Ω–∏—è** - `ParserException` —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - —Å–µ–∫—Ü–∏—è –≤ `config/services.php`
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–∞–Ω–∞–ª—ã Laravel

## ‚ùå –£–±—Ä–∞–ª–∏ –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å (15+ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤):

### Commands:

- ‚ùå `TestPushHouseConnectionCommand` ‚Üí —Ñ–ª–∞–≥ `--test`
- ‚ùå `ForceSyncPushHouseCommand` ‚Üí —Ñ–ª–∞–≥ `--force`
- ‚ùå `PushHouseStatsCommand` ‚Üí –ª–æ–≥–∏

### DTOs:

- ‚ùå `PushHouseParsingResultDTO` ‚Üí –ø—Ä–æ—Å—Ç–æ–π –º–∞—Å—Å–∏–≤
- ‚ùå `PushHouseApiResponseDTO` ‚Üí –ø—Ä—è–º–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ JSON
- ‚ùå `BaseParserDTO` ‚Üí YAGNI –ø—Ä–∏–Ω—Ü–∏–ø
- ‚ùå `ParserResultInterface` ‚Üí over-engineering

### Jobs:

- ‚ùå `ProcessNewPushHouseAdsJob` ‚Üí –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π Job
- ‚ùå `ProcessDeactivatedPushHouseAdsJob` ‚Üí –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π Job
- ‚ùå `BatchProcessPushHouseAdsJob` ‚Üí –¥—É–±–ª–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π Job
- ‚ùå `SendPushHouseParsingReportJob` ‚Üí —á–µ—Ä–µ–∑ –ª–æ–≥–∏
- ‚ùå `NotifyPushHouseErrorsJob` ‚Üí —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –û—Å—Ç–∞–ª—å–Ω–æ–µ:

- ‚ùå 4 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏—è ‚Üí `ParserException` —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- ‚ùå 2 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥–∞ ‚Üí —Å–µ–∫—Ü–∏—è –≤ `services.php`
- ‚ùå 3 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ª–æ–≥-—Ñ–∞–π–ª–∞ ‚Üí —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

## –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

**–ë—ã–ª–æ:** ~25 —Ñ–∞–π–ª–æ–≤  
**–°—Ç–∞–ª–æ:** ~6 –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ + —Ç–µ—Å—Ç—ã  
**–≠–∫–æ–Ω–æ–º–∏—è:** ~75% —Ñ–∞–π–ª–æ–≤ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –≤—Å–µ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

–≠—Ç–∞ **–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è** —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º KISS, DRY –∏ YAGNI, –ø—Ä–∏ —ç—Ç–æ–º –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –æ–ø–∏—Å–∞–Ω–Ω—ã–π workflow –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –±—É–¥—É—â–µ–º.
