# Vue Islands - –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ data-vue-props

## –ü—Ä–æ–±–ª–µ–º–∞ –∏ —Ä–µ—à–µ–Ω–∏–µ

### üö® –ü—Ä–æ–±–ª–µ–º—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è props –≤ DOM:

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–∏–¥–Ω—ã –≤ HTML –∏—Å—Ö–æ–¥–Ω–∏–∫–µ
2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ë–æ–ª—å—à–∏–µ JSON –æ–±—ä–µ–∫—Ç—ã —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç —Ä–∞–∑–º–µ—Ä DOM
3. **–ü–∞–º—è—Ç—å**: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (DOM + Vue instance)
4. **–û—Ç–ª–∞–¥–∫–∞**: –ó–∞—Å–æ—Ä–µ–Ω–∏–µ –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

### ‚úÖ –†–µ—à–µ–Ω–∏–µ: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

```typescript
// –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
cleanupPropsAttribute(element, componentName);
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è –æ—á–∏—Å—Ç–∫–∏

```typescript
import { configureVueIslands } from './vue-islands';

// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–¥ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π
configureVueIslands({
  cleanupProps: true, // –í–∫–ª—é—á–∏—Ç—å –æ—á–∏—Å—Ç–∫—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: true)
  cleanupDelay: 1000, // –ó–∞–¥–µ—Ä–∂–∫–∞ –≤ –º—Å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 1000)
  preservePropsInDev: true, // –°–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ development (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: true)
});
```

### –û–ø—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä             | –¢–∏–ø       | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ                                         |
| -------------------- | --------- | --------------------- | ------------------------------------------------ |
| `cleanupProps`       | `boolean` | `true`                | –í–∫–ª—é—á–∞–µ—Ç/–æ—Ç–∫–ª—é—á–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –æ—á–∏—Å—Ç–∫—É        |
| `cleanupDelay`       | `number`  | `1000`                | –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –æ—á–∏—Å—Ç–∫–æ–π –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö          |
| `preservePropsInDev` | `boolean` | `true`                | –°–æ—Ö—Ä–∞–Ω—è—Ç—å props –≤ development —Ä–µ–∂–∏–º–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ |

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ timing

### ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç—Å—è:

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–∞**:

   ```typescript
   if (element.isConnected && element.hasAttribute('data-vue-initialized')) {
     // –û—á–∏—â–∞–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç –≤ DOM –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
   }
   ```

2. **–ó–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏**:

   ```typescript
   setTimeout(() => {
     // –û—á–∏—Å—Ç–∫–∞ –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
   }, currentConfig.cleanupDelay);
   ```

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**:
   ```typescript
   .catch((error: Error) => {
     // –ù–ï –æ—á–∏—â–∞–µ–º props –ø—Ä–∏ –æ—à–∏–±–∫–µ - –Ω—É–∂–Ω—ã –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
     element.removeAttribute('data-vue-initialized');
   });
   ```

### üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –æ—Ç race conditions:

- ‚úÖ –û—á–∏—Å—Ç–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ `app.mount()`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ `element.isConnected` –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º
- ‚úÖ –ü—Ä–∏ –æ—à–∏–±–∫–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ props —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
- ‚úÖ –í development —Ä–µ–∂–∏–º–µ props —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –°–æ–±—ã—Ç–∏—è –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

```typescript
// –°–æ–±—ã—Ç–∏–µ –æ—á–∏—Å—Ç–∫–∏ props
document.addEventListener('vue-component-props-cleaned', event => {
  console.log('Props –æ—á–∏—â–µ–Ω—ã:', {
    componentName: event.detail.componentName,
    dataSize: event.detail.dataSize,
    timestamp: event.detail.timestamp,
  });
});
```

### –ê–Ω–∞–ª–∏–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏

```typescript
// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
const dataSize = new Blob([propsValue]).size;
console.log(`–û—á–∏—Å—Ç–∫–∞ props –¥–ª—è ${componentName} (—Ä–∞–∑–º–µ—Ä: ${dataSize} –±–∞–π—Ç)`);
```

### –ú–µ—Ç–∫–∏ –≤ DOM –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

```html
<!-- –î–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ -->
<div data-vue-component="TabsComponent" data-vue-props='{"tabs": {...}}'>
  <!-- –ü–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ -->
  <div data-vue-component="TabsComponent" data-vue-initialized="true" data-vue-props-cleaned="true">
    <div class="vue-component-content">
      <!-- Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç -->
    </div>
  </div>
</div>
```

## –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ü—Ä–æ–¥–∞–∫—à–Ω (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)

```typescript
configureVueIslands({
  cleanupProps: true, // ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
  cleanupDelay: 500, // –ë—ã—Å—Ç—Ä–∞—è –æ—á–∏—Å—Ç–∫–∞
  preservePropsInDev: false, // –û—á–∏—â–∞—Ç—å –¥–∞–∂–µ –≤ dev
});
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

- üîí –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚ö° –õ—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- üíæ –≠–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏

### 2. Development (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

```typescript
configureVueIslands({
  cleanupProps: true,
  cleanupDelay: 1000, // –ë–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
  preservePropsInDev: true, // ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–ª—è –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä–∞
});
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

- üîç –£–¥–æ–±–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞
- üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –≤ DOM
- üõ†Ô∏è –ê–Ω–∞–ª–∏–∑ props –≤ –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä–µ

### 3. –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –æ—á–∏—Å—Ç–∫–∏ (—Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–ª—É—á–∞–∏)

```typescript
configureVueIslands({
  cleanupProps: false, // ‚ö†Ô∏è –¢–æ–ª—å–∫–æ –≤ –æ—Å–æ–±—ã—Ö —Å–ª—É—á–∞—è—Ö
});
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**

- üß™ A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- üìà –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- üîß –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

## –í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### üìä –ò–∑–º–µ—Ä–µ–Ω–∏—è (–ø—Ä–∏–º–µ—Ä —Å CreativesFilters):

```typescript
// –¢–∏–ø–∏—á–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã props:
const exampleProps = {
  initialFilters: {...},     // ~500 –±–∞–π—Ç
  selectOptions: {...},      // ~2-5 –ö–ë
  translations: {...},       // ~1-2 –ö–ë
  tabOptions: {...}          // ~300 –±–∞–π—Ç
};
// –û–±—â–∏–π —Ä–∞–∑–º–µ—Ä: ~4-8 –ö–ë –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
```

### üíæ –≠–∫–æ–Ω–æ–º–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤:

- **–ü–∞–º—è—Ç—å DOM**: -20-50% –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- **–°–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫**: –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π (props –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º)
- **–ü–∞—Ä—Å–∏–Ω–≥ HTML**: –£—Å–∫–æ—Ä–µ–Ω–∏–µ –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö props –æ–±—ä–µ–∫—Ç–∞—Ö

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### ‚úÖ **–í–°–ï–ì–î–ê** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—á–∏—Å—Ç–∫—É –∫–æ–≥–¥–∞:

1. **–ü—Ä–æ–¥–∞–∫—à–Ω –æ–∫—Ä—É–∂–µ–Ω–∏–µ** - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
2. **–ë–æ–ª—å—à–∏–µ props –æ–±—ä–µ–∫—Ç—ã** (>1KB) - —ç–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏
3. **–ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —É—Ç–µ—á–µ–∫
4. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** - —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### ‚ö†Ô∏è **–û–°–¢–û–†–û–ñ–ù–û** —Å –æ—á–∏—Å—Ç–∫–æ–π –ø—Ä–∏:

1. **Hot Module Replacement** - –º–æ–≥—É—Ç –Ω—É–∂–Ω—ã props –¥–ª—è –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è
2. **Dynamic re-mounting** - props –Ω—É–∂–Ω—ã –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
3. **External integrations** - —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç—ã –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å props

### üö´ **–ù–ï –û–ß–ò–©–ê–¢–¨** props –∫–æ–≥–¥–∞:

1. **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–∂–µ—Ç –ø–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è** - –Ω—É–∂–Ω—ã –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
2. **–í–Ω–µ—à–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç props** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Ç—Ä–µ—Ç—å–∏—Ö —Å—Ç–æ—Ä–æ–Ω
3. **Debug/–ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

## –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –≤ –ø—Ä–æ–µ–∫—Ç

### –ü–æ—ç—Ç–∞–ø–Ω–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ:

```typescript
// –§–∞–∑–∞ 1: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ development
configureVueIslands({
  cleanupProps: true,
  preservePropsInDev: true, // –ë–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
});

// –§–∞–∑–∞ 2: –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –≤ staging
configureVueIslands({
  cleanupProps: true,
  preservePropsInDev: false, // –ü–æ–ª–Ω–∞—è –∏–º–∏—Ç–∞—Ü–∏—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
});

// –§–∞–∑–∞ 3: –ü—Ä–æ–¥–∞–∫—à–Ω
configureVueIslands({
  cleanupProps: true,
  cleanupDelay: 500, // –ë—ã—Å—Ç—Ä–∞—è –æ—á–∏—Å—Ç–∫–∞
  preservePropsInDev: false,
});
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**üéØ –û—á–∏—Å—Ç–∫–∞ `data-vue-props` –¶–ï–õ–ï–°–û–û–ë–†–ê–ó–ù–ê –∏ –ë–ï–ó–û–ü–ê–°–ù–ê** –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ:

- ‚úÖ **–ü—Ä–æ–¥–∞–∫—à–Ω**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ **Development**: –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å `preservePropsInDev: true`
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**: –í—Å—Ç—Ä–æ–µ–Ω–∞ –≤ Vue Islands –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
- ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ü–æ–ª–Ω–∞—è –æ–±–æ–∑—Ä–µ–≤–∞–µ–º–æ—Å—Ç—å —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞!**
